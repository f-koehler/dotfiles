export ZSHD="{{ HOME }}/.zsh.d"

[ -f "{{ HOME }}/.profile" ] && source "{{ HOME }}/.profile"


setopt autocd extendedglob nomatch menucomplete
setopt interactive_comments
zle_highlight=('paste:none')
unsetopt BEEP

# completion system
autoload -Uz compinit
zstyle ':completion:*' menu select
zmodload zsh/complist
_comp_options+=(globdots)

autoload -U up-line-or-beginning-search
autoload -U down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search

# colors
autoload -Uz colors && colors

# history
setopt appendhistory
setopt histignorealldups

# keybindings
ctrl-z-toggle () {
  if [[ $#BUFFER -eq 0 ]]; then
    BUFFER="fg"
    zle accept-line
  else
    zle push-input
    zle clear-screen
  fi
}

zle -N ctrl-z-toggle
bindkey '^Z' ctrl-z-toggle


bindkey "^[[H" beginning-of-line
bindkey "^[[F" end-of-line
bindkey "^[[1;5C" forward-word
bindkey "^[[1;5D" backward-word
bindkey "^[[3~" delete-char
bindkey "^[[1;3D" backward-word
bindkey "^[[1;3C" forward-word

# hooks
{% for hook in zsh_hooks %}
{{ hook }}
{% endfor %}
source {{ HOME }}//.zsh.d/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source {{ HOME }}//.zsh.d/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh

# aliases
{% for alias in aliases %}
alias {{ alias[0] }}="{{ alias[1] }}"
{% endfor %}

# exports
HISTFILE="{{ HOME }}/.zsh_history"
HISTSIZE=1000000
SAVEHIST=1000000
HIST_STAMPS="yyyy-mm-dd"

{% for export in xdg %}
export XDG_{{ export|upper }}="{{ xdg[export] }}"
{% endfor %}
{% for export in exports %}
export {{ export|upper }}="{{ exports[export] }}"
{% endfor %}

if (( $+commands[pip] )); then
	eval "$(pip completion --zsh)"
fi


# completions
fpath+={{ HOME }}/.zsh.d/plugins/conda-zsh-completion
fpath+={{ HOME }}/.zfunc
compinit

# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('{{ anaconda_prefix }}/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "{{ anaconda_prefix }}/etc/profile.d/conda.sh" ]; then
        . "{{ anaconda_prefix }}/etc/profile.d/conda.sh"
    else
        export PATH="{{ anaconda_prefix }}/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<
