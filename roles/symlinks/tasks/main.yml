- name: symlinks in ~/.config/
  file:
    src: "{{ role_path }}/files/config/{{ item }}"
    dest: "~/.config/{{ item }}"
    state: link
    force: yes
    follow: no
  loop:
    - alacritty
    - gtk-3.0
    - htop
    - khal
    - kitty
    - mpv
    - nvim
    - offlineimap
    - picom
    - ranger
    - rofi
    - systemd
    - vdirsyncer
  notify:
    - systemd reload
- name: symlinks in ~/
  file:
    src: "{{ role_path }}/files/home/{{ item }}"
    dest: "~/{{ item }}"
    state: link
    force: yes
    follow: no
  loop:
    - .condarc
    - .dir_colors
    - .emacs.d
    - .gitconfig
    - .scripts
    - .xinitrc
    - .zsh.d
    - .Xresources
    - .Xdefaults
    - .ideavimrc
- name: symlink zsh config
  file:
    src: ~/.zsh.d/init.zsh
    dest: ~/.zshrc
    state: link
    force: yes
    follow: no
- name: symlink p10k config
  file:
    src: ~/.zsh.d/p10k.zsh
    dest: ~/.p10k.zsh
    state: link
    force: yes
    follow: no
- name: flush handlers
  ansible.builtin.meta: flush_handlers
- name: enable systemd user units
  systemd:
    name: "{{ item }}"
    enabled: yes
    state: started
    scope: user
  loop:
    - update-dotfiles-submodules.timer
    - update-flatpaks.timer
