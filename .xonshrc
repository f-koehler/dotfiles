# vim: ft=python

from xonsh.environ import dirty_working_directory, current_branch
def format_branch():
    branch = current_branch().strip()
    if branch:
        ret = " (" + branch
        if dirty_working_directory():
            ret += "*"
        ret += ")"
        return ret
    return ""

def branch_color():
    if dirty_working_directory():
        return "{INTENSE_RED}"
    return "{GREEN}"

$FORMATTER_DICT["branch_color"] = branch_color
$FORMATTER_DICT["curr_branch"] = format_branch

$PROMPT = "{BOLD_GREEN}{user}@{hostname} {RED}{cwd}{branch_color}{curr_branch} {BOLD_GREEN}{prompt_end} {NO_COLOR}"

$EDITOR = "vim"
$PAGER = "less"

aliases["ll"] = "ls -lh"
aliases["prettyjson"] = "python -m json.tool"
aliases["dotfiles"] = "git --git-dir ~/.dotfiles/.git --work-tree=$HOME"
